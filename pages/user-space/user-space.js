(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/user-space/user-space"],{"12e9":function(t,e,n){"use strict";(function(t){n("2b3c"),n("921b");i(n("66fd"));var e=i(n("34a9"));function i(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("543d")["createPage"])},"33b4":function(t,e,n){"use strict";var i,r=function(){var t=this,e=t.$createElement;t._self._c},s=[];n.d(e,"b",function(){return r}),n.d(e,"c",function(){return s}),n.d(e,"a",function(){return i})},"34a9":function(t,e,n){"use strict";n.r(e);var i=n("33b4"),r=n("a612");for(var s in r)"default"!==s&&function(t){n.d(e,t,function(){return r[t]})}(s);n("9e40");var a,u=n("f0c5"),o=Object(u["a"])(r["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],a);e["default"]=o.exports},"74bc":function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=r(n("a34a"));r(n("d86f"));function r(t){return t&&t.__esModule?t:{default:t}}function s(t,e){return o(t)||u(t,e)||a()}function a(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function u(t,e){var n=[],i=!0,r=!1,s=void 0;try{for(var a,u=t[Symbol.iterator]();!(i=(a=u.next()).done);i=!0)if(n.push(a.value),e&&n.length===e)break}catch(o){r=!0,s=o}finally{try{i||null==u["return"]||u["return"]()}finally{if(r)throw s}}return n}function o(t){if(Array.isArray(t))return t}function c(t,e,n,i,r,s,a){try{var u=t[s](a),o=u.value}catch(c){return void n(c)}u.done?e(o):Promise.resolve(o).then(i,r)}function h(t){return function(){var e=this,n=arguments;return new Promise(function(i,r){var s=t.apply(e,n);function a(t){c(s,i,r,a,u,"next",t)}function u(t){c(s,i,r,a,u,"throw",t)}a(void 0)})}}var f=function(){return n.e("components/user-space/user-space-head").then(n.bind(null,"1038"))},d=function(){return n.e("components/home/home-data").then(n.bind(null,"ae92"))},l=function(){return n.e("components/index/swiper-tab-head").then(n.bind(null,"f422"))},p=function(){return n.e("components/user-space/user-space-userinfo").then(n.bind(null,"0d93"))},m=function(){return n.e("components/common/common-list").then(n.bind(null,"6b03"))},b=function(){return n.e("components/common/load-more").then(n.bind(null,"7cb6"))},g=function(){return n.e("components/user-space/user-space-popup").then(n.bind(null,"f500"))},v=function(){return n.e("components/common/no-thing").then(n.bind(null,"0d7e"))},x={components:{userSpaceHead:f,homeData:d,swiperTabHead:l,userSpaceUserinfo:p,commonList:m,loadMore:b,userSpacePopup:g,noThing:v},data:function(){return{show:!1,userinfo:{bgimg:1,userpic:"",username:"",sex:0,age:20,isguanzhu:!1,regtime:"",id:0,birthday:"",job:"",path:"",qg:""},spacedata:[{name:"获赞",num:0},{name:"关注",num:0},{name:"粉丝",num:0}],tabIndex:0,tabBars:[{name:"主页",id:"zhuye"},{name:"糗事",id:"qiushi"},{name:"动态",id:"dongtai"}],tablist:[{},{loadtext:"上拉加载更多",list:[],page:1,firstload:!1},{loadtext:"上拉加载更多",list:[],page:1,firstload:!1}]}},onReachBottom:function(){this.loadmore()},onNavigationBarButtonTap:function(t){0==t.index&&this.togleShow()},onLoad:function(t){this.__init(t.userid)},methods:{__init:function(t){this.getUserInfo(t),this.getCounts(t)},getUserInfo:function(){var t=h(i.default.mark(function t(e){var n,r,a,u,o,c,h,f,d,l,p;return i.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(n=["不限","男","女"],r=["秘密","未婚","已婚"],e!=this.User.userinfo.id){t.next=9;break}u=this.User.userinfo,a=!0,o=!1,c=!1,t.next=21;break;case 9:return t.next=11,this.$http.post("/getuserinfo",{user_id:e},{token:!0});case 11:if(h=t.sent,f=s(h,2),d=f[0],l=f[1],this.$http.errorCheck(d,l)){t.next=17;break}return t.abrupt("return");case 17:u=l.data.data,a=!1,o=!!l.data.data.fens.length,c=!!l.data.data.blacklist.length;case 21:p=u.create_time,this.userinfo={isme:a,bgimg:1,userpic:u.userpic,username:u.username,sex:n[u.userinfo.sex]||"不限",age:u.userinfo.age,isguanzhu:o,isblack:c,regtime:p,id:u.id,birthday:u.userinfo.birthday||"未知",job:u.userinfo.job||"未知",path:u.userinfo.path||"未知",qg:r[u.userinfo.qg]||"秘密"},console.log(this.userinfo);case 24:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}(),getCounts:function(){var t=h(i.default.mark(function t(e){var n,r,a,u,o;return i.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(e!=this.User.userinfo.id){t.next=4;break}n=this.User.counts,t.next=13;break;case 4:return t.next=6,this.$http.get("/user/getcounts/"+e);case 6:if(r=t.sent,a=s(r,2),u=a[0],o=a[1],this.$http.errorCheck(u,o)){t.next=12;break}return t.abrupt("return");case 12:n=o.data.data;case 13:n&&(this.spacedata[0].num=n.post_count,this.spacedata[1].num=n.withfollow_count,this.spacedata[2].num=n.withfen_count);case 14:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}(),updateGuanZhu:function(e){this.userinfo.isguanzhu=e;var n={type:"guanzhu",userid:this.userinfo.id,data:e};t.$emit("updateData",n)},togleShow:function(){if(this.userinfo.id===this.User.userinfo.id)return this.User.navigate({url:"/pages/user-set-userinfo/user-set-userinfo"});this.show=!this.show},lahei:function(){var e=h(i.default.mark(function e(){var n,r,a,u,o,c;return i.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t.showLoading({title:"Loading...",mask:!1}),n=this.userinfo.isblack?"/removeblack":"/addblack",r=this.userinfo.isblack?"移除黑名单":"加入黑名单",e.next=5,this.$http.post(n,{id:this.userinfo.id},{token:!0,checkToken:!0,checkAuth:!0});case 5:if(a=e.sent,u=s(a,2),o=u[0],c=u[1],this.$http.errorCheck(o,c)){e.next=12;break}return t.hideLoading(),e.abrupt("return",this.togleShow());case 12:t.hideLoading(),t.showToast({title:r+"成功"}),this.userinfo.isblack=!this.userinfo.isblack,this.togleShow();case 16:case"end":return e.stop()}},e,this)}));function n(){return e.apply(this,arguments)}return n}(),goToChat:function(){var t={userid:this.userinfo.id,userpic:this.userinfo.userpic,username:this.userinfo.username};this.User.navigate({url:"/pages/user-chat/user-chat?userinfo="+JSON.stringify(t)}),this.togleShow()},loadmore:function(){"上拉加载更多"==this.tablist[this.tabIndex].loadtext&&(this.tablist[this.tabIndex].loadtext="加载中...",this.tablist[this.tabIndex].page++,this.getList())},tabtap:function(t){this.tabIndex=t,this.tablist[t].firstload||0===t||this.getList()},getList:function(){var t=h(i.default.mark(function t(){var e,n,r,a,u,o,c,h,f,d;return i.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e=this.tablist[this.tabIndex].page,n=this.userinfo.isme?"/user/post/".concat(e):"/user/".concat(this.userinfo.id,"/post/").concat(e),r=this.tabIndex,t.next=5,this.$http.get(n,{},{token:!0});case 5:if(a=t.sent,u=s(a,2),o=u[0],c=u[1],console.log(c),this.$http.errorCheck(o,c)){t.next=13;break}return this.tablist[r].firstload=!0,t.abrupt("return",this.tablist[r].loadtext="上拉加载更多");case 13:for(h=[],f=c.data.data.list,d=0;d<f.length;d++)h.push(this.__format(f[d]));return this.tablist[r].list=e>1?this.tablist[r].list.concat(h):h,this.tablist[r].firstload=!0,this.tablist[r].loadtext=f.length<10?"没有更多数据了":"上拉加载更多",t.abrupt("return");case 20:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),__format:function(t){var e={userid:t.user.id,userpic:t.user.userpic,username:t.user.username,isguanzhu:!!t.user.fens.length,id:t.id,title:t.title,type:"img",titlepic:t.titlepic,video:!1,path:t.path,share:!!t.share,infonum:{index:t.support.length>0?t.support[0].type+1:0,dingnum:t.ding_count,cainum:t.cai_count},goodnum:t.ding_count,commentnum:t.comment_count,sharenum:t.sharenum,sex:t.user.userinfo.sex,age:t.user.userinfo.age};return t.user_id===this.User.userinfo.id&&(e.isguanzhu=!0),e}}};e.default=x}).call(this,n("543d")["default"])},"9e40":function(t,e,n){"use strict";var i=n("f3c3"),r=n.n(i);r.a},a612:function(t,e,n){"use strict";n.r(e);var i=n("74bc"),r=n.n(i);for(var s in i)"default"!==s&&function(t){n.d(e,t,function(){return i[t]})}(s);e["default"]=r.a},f3c3:function(t,e,n){}},[["12e9","common/runtime","common/vendor"]]]);